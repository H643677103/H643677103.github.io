var themeColorMeta,pageHeaderEl,navMusicEl,consoleEl,chyt_musicFirst=!1,chyt_keyboard=null,chyt_musicPlaying=!1,$bodyWrap=document.getElementById("body-wrap"),chyt_intype=!1,chyt_keyUpEvent_timeoutId=null,chyt_keyUpShiftDelayEvent_timeoutId=null,popupWindowTimer=null,adjectives=["美丽的","英俊的","聪明的","勇敢的","可爱的","慷慨的","善良的","可靠的","开朗的","成熟的","稳重的","真诚的","幽默的","豁达的","有趣的","活泼的","优雅的","敏捷的","温柔的","温暖的","敬业的","细心的","耐心的","深沉的","朴素的","含蓄的","率直的","开放的","务实的","坚强的","自信的","谦虚的","文静的","深刻的","纯真的","朝气蓬勃的","慎重的","大方的","顽强的","迷人的","机智的","善解人意的","富有想象力的","有魅力的","独立的","好奇的","干净的","宽容的","尊重他人的","体贴的","守信的","有耐性的","有责任心的","有担当的","有远见的","有智慧的","有眼光的","有冒险精神的","有爱心的","有同情心的","喜欢思考的","喜欢学习的","具有批判性思维的","善于表达的","善于沟通的","善于合作的","善于领导的","有激情的","有幽默感的","有思想的","有个性的","有正义感的","有责任感的","有创造力的","有想象力的","有艺术细胞的","有团队精神的","有协调能力的","有决策能力的","有组织能力的","有学习能力的","有执行能力的","有分析能力的","有逻辑思维的","有创新能力的","有专业素养的","有商业头脑的"],vegetablesAndFruits=["萝卜","白菜","芹菜","生菜","青椒","辣椒","茄子","豆角","黄瓜","西红柿","洋葱","大蒜","土豆","南瓜","豆腐","韭菜","花菜","西兰花","蘑菇","金针菇","苹果","香蕉","橙子","柠檬","猕猴桃","草莓","葡萄","桃子","杏子","李子","石榴","西瓜","哈密瓜","蜜瓜","樱桃","蓝莓","柿子","橄榄","柚子","火龙果"],selectRandomSong=[],musicVolume=.8,changeMusicListFlag=!1,defaultPlayMusicList=[];document.addEventListener("DOMContentLoaded",function(){let n,a,e,t=!1,c=e=>{var t=e=>Array.from(e).reduce((e,t)=>e+t.offsetWidth,0),e=(e&&(e=t(document.querySelector("#blog_name > a").children),t=t(document.getElementById("menus").children),n=e+t,a=document.getElementById("nav")),window.innerWidth<=768||n>a.offsetWidth-120);a.classList.toggle("hide-menu",e)},r={open:()=>{chyt.sidebarPaddingR(),chyt.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),t=!0},close:()=>{document.body.style.paddingRight="",chyt.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),t=!1}};function s(e){let c=e=>{let i="",a=e=>e.replace(/"/g,"&quot;");return e.forEach(e=>{var t=e.alt?`alt="${a(e.alt)}"`:"",n=e.title?`title="${a(e.title)}"`:"",o=e.address||"",o=`
        <div class="fj-gallery-item">
          ${o?`<div class="tag-address">${o}</div>`:""}
          <img src="${e.url}" ${t+n}>
        </div>
      `;i+=o}),i},l=(e,t,n)=>{var n=Number(n),o=t.length;return n<o?e.insertAdjacentHTML("beforeend",c(t.splice(0,n))):(e.insertAdjacentHTML("beforeend",c(t)),e.classList.remove("lazyload")),window.lazyLoadInstance&&window.lazyLoadInstance.update(),n<o?n:o},n=(o,i)=>{let a=o.getAttribute("data-limit")??i.length;if(!o.classList.contains("lazyload")||i.length<a)o.innerHTML=c(i),o.nextElementSibling.style.display="none";else if(!o.classList.contains("btn_album_detail_lazyload")||o.classList.contains("page_img_lazyload")){l(o,i,a);let n=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&setTimeout((e=l(o,i,a),fjGallery(o,"appendImages",o.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${e})`)),chyt.loadLightbox(o.querySelectorAll("img")),void(e<Number(a)&&n.unobserve(o.nextElementSibling))),100)})});n.observe(o.nextElementSibling)}else{l(o,i,a);let t=()=>{var e=l(o,i,a);fjGallery(o,"appendImages",o.querySelectorAll(`.fj-gallery-item:nth-last-child(-n+${e})`)),chyt.loadLightbox(o.querySelectorAll("img")),e<a&&o.nextElementSibling.removeEventListener("click",t)};o.nextElementSibling.addEventListener("click",t)}chyt.initJustifiedGallery(o),chyt.loadLightbox(o.querySelectorAll("img")),window.lazyLoadInstance&&window.lazyLoadInstance.update()};var t=()=>{e.forEach(t=>{t.classList.contains("url")?(async e=>(await fetch(e)).json())(t.textContent).then(e=>{n(t,e)}):n(t,JSON.parse(t.textContent))})};window.fjGallery?t():(getCSS(""+GLOBAL_CONFIG.source.justifiedGallery.css),getScript(""+GLOBAL_CONFIG.source.justifiedGallery.js).then(t))}function d(){let o=document.getElementById("rightside"),i=window.innerHeight+56,a=0,c=(document.body.scrollHeight<=i&&(o.style.cssText="opacity: 1; transform: translateX(-58px)"),0),l=!0,r=document.getElementById("page-header"),s=document.getElementById("popup-window"),d="function"==typeof chatBtnHide,m="function"==typeof chatBtnShow,u=!1,e=document.getElementById("nav-music"),t=document.getElementById("footer"),y=document.getElementById("waterfall"),h=document.getElementById("percent"),g=document.getElementById("nav-totop"),p=document.getElementById("body-wrap"),L=document.getElementById("post-comment")||document.getElementById("footer");function v(e){(isNaN(e)||e<0)&&(e=0);var t=p?p.clientHeight:document.documentElement.scrollHeight,n=window.innerHeight||document.documentElement.clientHeight,t=Math.max(t-n,1),n=Math.round(100*(e/t)),t=Math.max(1,Math.min(n,100));h.textContent=t,((e=>{if(e){var t=window.getComputedStyle(e).getPropertyValue("display");if("none"!=t)return t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.getBoundingClientRect().top<=t}})(L)||90<t)&&20<e?(g.classList.add("long"),h.textContent="返回顶部"):(g.classList.remove("long"),h.textContent=t),y&&(n=e%document.documentElement.clientHeight,!u&&100+n>=document.documentElement.clientHeight?setTimeout(()=>{waterfall("#waterfall")},500):setTimeout(()=>{y&&waterfall("#waterfall")},500))}var n=chyt.throttle(()=>{var e=window.scrollY||document.documentElement.scrollTop,t=(n=(t=e)>c,c=t,n),n=Math.abs(a-e);60<e&&n<20&&0!=n||(s&&s.classList.contains("show-popup-window")&&60<e&&20<n&&0!=a&&chyt.throttle(()=>{popupWindowTimer&&clearTimeout(popupWindowTimer),popupWindowTimer=setTimeout(()=>{s.classList.contains("popup-hide")||s.classList.add("popup-hide"),setTimeout(()=>{s.classList.remove("popup-hide"),s.classList.remove("show-popup-window")},1e3)},1e3)},1e3)(),26<(a=e)?(t?(r.classList.contains("nav-visible")&&r.classList.remove("nav-visible"),m&&!0===l&&(chatBtnHide(),l=!1)):(r.classList.contains("nav-visible")||r.classList.add("nav-visible"),d&&!1===l&&(chatBtnShow(),l=!0)),requestAnimationFrame(()=>{chyt.initThemeColor(),r.classList.add("nav-fixed")}),"0"===window.getComputedStyle(o).getPropertyValue("opacity")&&(o.style.cssText="opacity: 0.8; transform: translateX(-58px)")):(e<=5&&requestAnimationFrame(()=>{r.classList.remove("nav-fixed"),r.classList.remove("nav-visible"),chyt.initThemeColor()}),o.style.cssText="opacity: ''; transform: ''"),document.body.scrollHeight<=i&&(o.style.cssText="opacity: 0.8; transform: translateX(-58px)"),v(e))},96);t&&chyt.intersectionObserver(()=>{t&&e&&768<document.body.clientWidth&&(e.style.bottom="-10px",e.style.opacity="0"),u=!0},()=>{t&&e&&768<document.body.clientWidth&&(e.style.bottom="20px",e.style.opacity="1")})().observe(t),n(),chyt.addEventListenerPjax(window,"scroll",n,{passive:!0})}function m(){let s=GLOBAL_CONFIG_SITE.isToc,d=GLOBAL_CONFIG.isAnchor;var o=document.getElementById("article-container");if(o&&(s||d)){let e,a,c,l;if(s){let n=document.getElementById("card-toc");a=n.querySelector(".toc-content"),e=a.querySelectorAll(".toc-link"),$tocPercentage=n.querySelector(".toc-percentage"),l=a.classList.contains("is-expand");chyt.addEventListenerPjax(a,"click",e=>{var t=e.target.closest(".toc-link");t&&(e.preventDefault(),chyt.scrollToDest(chyt.getEleTop(document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""))),300),window.innerWidth<900)&&n.classList.remove("open")}),c=e=>{var e=e.getBoundingClientRect().top,t=a.scrollTop;e>document.documentElement.clientHeight-100&&(a.scrollTop=t+150),e<100&&(a.scrollTop=t-150)}}o=o.querySelectorAll("h1,h2,h3,h4,h5,h6");let t=Array.from(o).filter(e=>"CrawlerTitle"!==e.id),r="",n=function(n){if(0===n)return!1;let o="",i="";if(t.forEach(function(e,t){n>chyt.getEleTop(e)-80&&(e=e.id,o=e?"#"+encodeURI(e):"",i=t)}),r!==i&&(d&&chyt.updateAnchor(o),r=i,s)&&(a.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")}),""!==o)){let t=e[i];if(t.classList.add("active"),setTimeout(()=>{c(t)},0),!l){let e=t.parentNode;for(;!e.matches(".toc");e=e.parentNode)e.matches("li")&&e.classList.add("active")}}};o=chyt.throttle(()=>{var e=window.scrollY||document.documentElement.scrollTop;n(e)},100);chyt.addEventListenerPjax(window,"scroll",o,{passive:!0})}}function u(e){e.forEach(e=>{var t=e.getAttribute("datetime");e.textContent=chyt.diffDate(t,!0),e.style.display="inline"})}let o=t=>{let n=(window.globalFn||{}).themeChange||{};n&&(Object.keys(n).forEach(e=>{(0,n[e])(t)}),rm&&rm.hideRightMenu(),e.querySelector(".menu-darkmode-text").textContent="light"===t?"深色模式":"浅色模式",GLOBAL_CONFIG_SITE.isPost||(document.querySelector(":root").style.setProperty("--chyt-bar-background","var(--chyt-meta-theme-color)"),requestAnimationFrame(()=>{chyt.initThemeColor()}),document.documentElement.style.setProperty("--chyt-main",getComputedStyle(document.documentElement).getPropertyValue("--chyt-theme")),document.documentElement.style.setProperty("--chyt-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"23"),document.documentElement.style.setProperty("--chyt-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"dd")))},l={readmode:()=>{let e=document.body,t=(e.classList.add("read-mode"),document.createElement("button")),n=(t.type="button",t.className="fas fa-sign-out-alt exit-readmode",e.appendChild(t),()=>{e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",n)});t.addEventListener("click",n)},darkmode:()=>{var e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";"dark"==e?(activateDarkMode(),void 0!==GLOBAL_CONFIG.Snackbar&&chyt.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),void 0!==GLOBAL_CONFIG.Snackbar&&chyt.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),saveToLocal.set("theme",e,2),o(e)},"rightside-config":e=>{let t=e.firstElementChild;t.classList.contains("show")&&(t.classList.add("status"),setTimeout(()=>{t.classList.remove("status")},300)),t.classList.toggle("show")},"go-up":()=>{chyt.scrollToDest(0,500)},"hide-aside-btn":()=>{var e=document.documentElement.classList,t=e.contains("hide-aside")?"show":"hide";saveToLocal.set("aside-status",t,2),e.toggle("hide-aside")},"mobile-toc-button":e=>{let t=document.getElementById("card-toc");t.style.transformOrigin=`right ${e.getBoundingClientRect().top+17}px`,t.style.transition="transform 0.3s ease-in-out",t.classList.toggle("open"),t.addEventListener("transitionend",()=>{t.style.transition="",t.style.transformOrigin=""},{once:!0})},"chat-btn":()=>{window.chatBtnFn()},translateLink:()=>{window.translateFn.translatePage()}},v=(document.getElementById("rightside").addEventListener("click",function(e){e=e.target.closest("[id]");e&&l[e.id]&&l[e.id](this)}),document.addEventListener("touchstart",e=>{chyt.removeRewardMask()},{passive:!0}),()=>{var e=document.querySelectorAll("#article-container .tabs");if(e.length){let i=(e,t)=>{Array.from(e).forEach(e=>{e.classList.remove("active"),e!==t&&e.id!==t||e.classList.add("active")})};e.forEach(e=>{var n,t,o=!!e.querySelectorAll(".gallery-container");n=o,chyt.addEventListenerPjax(e.firstElementChild,"click",function(e){var t,e=e.target.closest("button");e.classList.contains("active")||(i(this.children,e),this.classList.remove("no-default"),e=e.getAttribute("data-href"),t=this.nextElementSibling,i(t.children,e),n&&0<(t=t.querySelectorAll(`#${e} .fj-gallery`)).length&&chyt.initJustifiedGallery(t))}),t=e,chyt.addEventListenerPjax(t.lastElementChild,"click",e=>{e.target.closest("button")&&chyt.scrollToDest(chyt.getEleTop(t),300)})})}}),E=e=>/^(rgb|RGB)/.test(e)?e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").reduce((e,t)=>e+Number(t).toString(16).padStart(2,"0"),"#"):/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(e)&&4===e.length?Array.from(e.slice(1)).reduce((e,t)=>e+t+t,"#"):e,f=(e,t)=>{var n=e.startsWith("#"),e=(n&&(e=e.slice(1)),parseInt(e,16)),o=(e,t)=>255<(e+=t)?255:e<0?0:e,i=o(e>>16,t),a=o(e>>8&255,t),o=o(255&e,t);return(n?"#":"")+String("000000"+(o|a<<8|i<<16).toString(16)).slice(-6)},b=e=>{var[,e,t,n]=(e=>{e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,o)=>t+t+n+n+o+o);e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?`rgb(${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)})`:null})(e).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return.5<=(299*e+587*t+114*n)/255e3?"light":"dark"};function i(){Promise.all([{url:"https://sdk.51.la/js-sdk-pro.min.js",charset:"UTF-8",crossorigin:!1,id:"LA_COLLECT"},{url:"https://sdk.51.la/perf/js-sdk-perf.min.js",crossorigin:"anonymous"}].map(({url:e,charset:t,crossorigin:n,id:o})=>{return[i,a="UTF-8",c,l]=[e,t,n,o],new Promise((t,e)=>{let n=document.createElement("script");n.src=i,n.async=!0,l&&n.setAttribute("id",l),a&&n.setAttribute("charset",a),c&&n.setAttribute("crossorigin",c),n.onerror=e,n.onload=n.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)});var i,a,c,l})).then(()=>{LA.init({id:GLOBAL_CONFIG.LA51.ck,ck:GLOBAL_CONFIG.LA51.ck}),(new LingQue.Monitor).init({id:GLOBAL_CONFIG.LA51.LingQueMonitorID,sendSuspicious:!0})}).catch(e=>{console.error("加载51a统计异常，本地加载403是正常情况:",e)})}function I(e,t){e=document.getElementById(e);e&&t?(t=e.querySelector(t))&&t.addEventListener("click",l.darkmode):e&&e.addEventListener("click",l.darkmode)}window.onkeydown=function(e){123===e.keyCode&&chyt.snackbarShow("开发者模式已打开，请遵循GPL协议",!1)};if(window.refreshFn=function(){var e,t,n,o;if(c(!0),a.classList.add("show"),themeColorMeta=document.querySelector('meta[name="theme-color"]'),pageHeaderEl=document.getElementById("page-header"),navMusicEl=document.getElementById("nav-music"),consoleEl=document.getElementById("console"),I("console",".darkmode_switchbutton"),GLOBAL_CONFIG_SITE.isPost?(void 0!==GLOBAL_CONFIG.noticeOutdate&&(n=GLOBAL_CONFIG.noticeOutdate,(o=chyt.diffDate(GLOBAL_CONFIG_SITE.postUpdate))>=n.limitDay)&&((t=document.createElement("div")).className="post-outdate-notice",t.textContent=n.messagePrev+" "+o+" "+n.messageNext,o=document.getElementById("article-container"),"top"===n.position?o.insertBefore(t,o.firstChild):o.appendChild(t)),GLOBAL_CONFIG.relativeDate.post&&u(document.querySelectorAll("#post-meta time"))):((GLOBAL_CONFIG.relativeDate.homepage||GLOBAL_CONFIG.relativeDate.simplehomepage)&&u(document.querySelectorAll("#recent-posts time")),GLOBAL_CONFIG.runtime&&(n=document.getElementById("runtimeshow"))&&(o=n.getAttribute("data-publishDate"),n.textContent=chyt.diffDate(o)+" "+GLOBAL_CONFIG.runtime),(t=document.getElementById("last-push-date"))&&(e=t.getAttribute("data-lastPushDate"),t.textContent=chyt.diffDate(e,!0)),(e=document.querySelector("#aside-cat-list.expandBtn"))&&chyt.addEventListenerPjax(e,"click",e=>{var t=e.target;"I"===t.nodeName&&(e.preventDefault(),t.parentNode.classList.toggle("expand"))},!0)),GLOBAL_CONFIG.diytitle){let e=GLOBAL_CONFIG.diytitle.leaveTitle,t=GLOBAL_CONFIG.diytitle.backTitle,n=document.title,o;document.addEventListener("visibilitychange",function(){document.hidden?(document.title=e,clearTimeout(o)):(document.title=t+n,o=setTimeout(function(){document.title=n},2e3))})}m(),GLOBAL_CONFIG_SITE.isHome&&(y=document.getElementById("scroll-down"))&&chyt.addEventListenerPjax(y,"click",()=>{var e=document.getElementById("bbTimeList");e?chyt.scrollToDest(e.offsetTop-62,300):chyt.scrollToDest(document.getElementById("home_top").offsetTop-60,300)});var y=GLOBAL_CONFIG.highlight;if(y){var h=y.highlightCopy,g=y.highlightLang,p=GLOBAL_CONFIG_SITE.isHighlightShrink;let m=y.highlightHeightLimit,u=h||g||void 0!==p;var L="highlighjs"===y.plugin?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if((u||m)&&L.length){let i="prismjs"===y.plugin,a="",c="",l=!0===p?"closed":"",r=(void 0!==p&&(a=`<i class="chytfont chyt-icon-angle-down expand ${l}"></i>`),h&&(c='<div class="copy-notice"></div><i class="chytfont chyt-icon-paste copy-button"></i>'),(e,t)=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy"))if(document.execCommand("copy"),void 0!==GLOBAL_CONFIG.Snackbar)chyt.snackbarShow(GLOBAL_CONFIG.copy.success);else{let e=t.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout(()=>{e.style.opacity=0},700)}else void 0!==GLOBAL_CONFIG.Snackbar?chyt.snackbarShow(GLOBAL_CONFIG.copy.noSupport):t.previousElementSibling.innerText=GLOBAL_CONFIG.copy.noSupport}),t=e=>{var t=e.parentNode,n=(t.classList.add("copy-true"),window.getSelection()),o=document.createRange(),o=(i?o.selectNodeContents(t.querySelectorAll("pre code")[0]):o.selectNodeContents(t.querySelectorAll("table .code pre")[0]),n.removeAllRanges(),n.addRange(o),n.toString());r(o,e.lastChild),n.removeAllRanges(),t.classList.remove("copy-true")},n=e=>{var t=[...e.parentNode.children].slice(1);e.firstChild.classList.toggle("closed"),chyt.isHidden(t[t.length-1])?t.forEach(e=>{e.style.display="block"}):t.forEach(e=>{e.style.display="none"})},s=function(e){e=e.target.classList;e.contains("expand")?n(this):e.contains("copy-button")&&t(this)},d=function(){this.classList.toggle("expand-done")},o=(e,t,n)=>{var o,i=document.createDocumentFragment();u&&((o=document.createElement("div")).className="highlight-tools "+l,o.innerHTML=a+e+c,chyt.addEventListenerPjax(o,"click",s),i.appendChild(o)),m&&t.offsetHeight>m+30&&((e=document.createElement("div")).className="code-expand-btn",e.innerHTML='<i class="chytfont chyt-icon-angle-double-down"></i>',chyt.addEventListenerPjax(e,"click",d),i.appendChild(e)),"hl"===n?t.insertBefore(i,t.firstChild):t.parentNode.insertBefore(i,t)};g?i?L.forEach(function(e){var t=`<div class="code-lang">${e.getAttribute("data-language")?e.getAttribute("data-language"):"Code"}</div>`;chyt.wrap(e,"figure",{class:"highlight"}),o(t,e)}):L.forEach(function(e){let t=e.getAttribute("class").split(" ")[1];var n=`<div class="code-lang">${t="plain"!==t&&void 0!==t&&"plaintext"!==t?t:"Code"}</div>`;o(n,e,"hl")}):i?L.forEach(function(e){chyt.wrap(e,"figure",{class:"highlight"}),o("",e)}):L.forEach(function(e){o("",e,"hl")})}}GLOBAL_CONFIG.isPhotoFigcaption&&document.querySelectorAll("#article-container img").forEach(function(e){var t,n=e.parentNode,o=e.title||e.alt;o&&!n.parentNode.classList.contains("justified-gallery")&&((t=document.createElement("div")).className="img-alt is-center",t.textContent=o,n.insertBefore(t,e.nextSibling))}),d(),window.scrollCollect&&window.scrollCollect();p=document.querySelectorAll("#content-inner .fj-gallery");if(p.length&&s(p),chyt.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)")),(h=document.querySelectorAll("#article-container table")).length&&h.forEach(e=>{e.closest(".highlight")||chyt.wrap(e,"div",{class:"table-wrap"})}),(()=>{var e=document.querySelectorAll("#article-container .hide-button");if(e.length){let t=function(e){this.classList.add("open");var t=this.nextElementSibling.querySelectorAll(".gallery-container");t.length&&addJustifiedGallery(t)};e.forEach(e=>{e.addEventListener("click",t,{once:!0})})}})(),v(),(()=>{var n=document.getElementById("switch-btn");if(n){let e=!1,t=document.getElementById("post-comment");chyt.addEventListenerPjax(n,"click",()=>{t.classList.toggle("move"),e||(e=!0,loadOtherComment())})}})(),document.getElementById("toggle-menu").addEventListener("click",()=>{r.open()}),document.getElementById("post-comment")){let t=1,n="",a=document.createElement("div"),c=(a.id="owo-big",document.querySelector("body"));function i(i){"IMG"==i.target.tagName&&t&&(t=0,n=setTimeout(()=>{var e=3*i.target.clientHeight,t=3*i.target.clientWidth;let n=i.x-i.offsetX-(t-i.target.clientWidth)/2;n+t>c.clientWidth&&(n-=n+t-c.clientWidth+10),n<0&&(n=10);var o=i.y-i.offsetY;a.style.height=e+"px",a.style.width=t+"px",a.style.left=n+"px",a.style.top=o+"px",a.style.display="flex",a.innerHTML=`<img src="${i.target.src}">`},100))}function l(e){a.style.display="none",t=1,clearTimeout(n)}c.appendChild(a),new MutationObserver(e=>{e.forEach(e=>{var t=e.addedNodes;for(let e=0;e<t.length;e++){var n=t[e];n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("OwO-body")&&!n.classList.contains("comment-barrage")&&((n=n).addEventListener("contextmenu",e=>e.preventDefault()),n.addEventListener("mouseover",i),n.addEventListener("mouseout",l))}})}).observe(document.getElementById("post-comment"),{childList:!0,subtree:!0})}(g=document.querySelector(".topGroup"))&&g.addEventListener("mouseleave",function(){document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1}),(async()=>{var t=document.querySelector(":root"),n=document.getElementById("post-top-bg")?.src;if(n){if(GLOBAL_CONFIG.mainTone)if(GLOBAL_CONFIG_SITE.postMainColor){let e=GLOBAL_CONFIG_SITE.postMainColor;"light"===b(e)&&(e=f(E(e),-40)),t.style.setProperty("--chyt-bar-background",e),requestAnimationFrame(()=>{chyt.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--chyt-main",e),document.documentElement.style.setProperty("--chyt-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"23"),document.documentElement.style.setProperty("--chyt-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"dd"))}else{var o="var(--chyt-theme)";let e="";"cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?e=n+"?imageAve":"api"==GLOBAL_CONFIG.mainTone.mode&&(e=GLOBAL_CONFIG.mainTone.api+n);try{var i=await fetch(e);if(i.ok&&i.headers.get("content-type")?.includes("application/json")){var a=await i.json();let e="cdn"==GLOBAL_CONFIG.mainTone.mode||"both"==GLOBAL_CONFIG.mainTone.mode?"#"+a.RGB.slice(2):a.RGB;"light"===b(e)&&(e=f(E(e),-40)),t.style.setProperty("--chyt-bar-background",e),requestAnimationFrame(()=>{chyt.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--chyt-main",e),document.documentElement.style.setProperty("--chyt-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"23"),document.documentElement.style.setProperty("--chyt-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"dd"))}else if("both"==GLOBAL_CONFIG.mainTone.mode)try{var c=await fetch(GLOBAL_CONFIG.mainTone.api+n);if(c.ok&&c.headers.get("content-type")?.includes("application/json")){let e=(await c.json()).RGB;"light"===b(e)&&(e=f(E(e),-40)),t.style.setProperty("--chyt-bar-background",e),requestAnimationFrame(()=>{chyt.initThemeColor()}),GLOBAL_CONFIG.mainTone.cover_change&&(document.documentElement.style.setProperty("--chyt-main",e),document.documentElement.style.setProperty("--chyt-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"23"),document.documentElement.style.setProperty("--chyt-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"dd"))}else t.style.setProperty("--chyt-bar-background",o),requestAnimationFrame(()=>{chyt.initThemeColor()}),document.documentElement.style.setProperty("--chyt-main",o)}catch{t.style.setProperty("--chyt-bar-background",o),requestAnimationFrame(()=>{chyt.initThemeColor()}),document.documentElement.style.setProperty("--chyt-main",o)}else t.style.setProperty("--chyt-bar-background",o),requestAnimationFrame(()=>{chyt.initThemeColor()}),document.documentElement.style.setProperty("--chyt-main",o)}catch(e){console.error("Error fetching data:",e),t.style.setProperty("--chyt-bar-background",o),requestAnimationFrame(()=>{chyt.initThemeColor()}),document.documentElement.style.setProperty("--chyt-main",o)}}}else t.style.setProperty("--chyt-bar-background","var(--chyt-meta-theme-color)"),requestAnimationFrame(()=>{chyt.initThemeColor()}),document.documentElement.style.setProperty("--chyt-main",getComputedStyle(document.documentElement).getPropertyValue("--chyt-theme")),document.documentElement.style.setProperty("--chyt-theme-op",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"23"),document.documentElement.style.setProperty("--chyt-theme-op-deep",getComputedStyle(document.documentElement).getPropertyValue("--chyt-main")+"dd")})(),(L=document.getElementById("toPageText"))&&L.addEventListener("keydown",e=>{13===e.keyCode&&(chyt.toPage(),e=document.getElementById("toPageButton").href,pjax.loadUrl(e))}),chyt.addEventListenerPjax(document.getElementById("toggle-menu"),"click",()=>{r.open()}),document.getElementById("page-name").innerText=document.title.split(" | "+GLOBAL_CONFIG_SITE.configTitle)[0],chyt.initIndexEssay(),chyt.changeTimeInEssay(),chyt.removeBodyPaceClass(),chyt.qrcodeCreate(),chyt.changeTimeInAlbumDetail(),chyt.reflashEssayWaterFall(),chyt.sayhi(),chyt.stopImgRightDrag(),chyt.addNavBackgroundInit(),chyt.setValueToBodyType(),chyt.catalogActive(),chyt.tagsPageActive(),chyt.categoriesBarActive(),chyt.topCategoriesBarScroll(),chyt.switchRightClickMenuHotReview(),chyt.getCustomPlayList(),chyt.addEventListenerConsoleMusicList(!1),chyt.initPaginationObserver(),setTimeout(()=>{var e;e=document.querySelectorAll("input, textarea"),Array.from(e).filter(e=>{"center-console"===e.id&&e.id}).forEach(e=>{e.addEventListener("focus",()=>{chyt_intype=!0}),e.addEventListener("blur",()=>{chyt_intype=!1})}),"function"==typeof addFriendLinksInFooter&&addFriendLinksInFooter()},200)},refreshFn(),window.addEventListener("resize",()=>{c(!1),t&&chyt.isHidden(document.getElementById("toggle-menu"))&&r.close()}),document.getElementById("menu-mask").addEventListener("click",e=>{r.close()}),e=document.getElementById("rightMenu"),I("menu-darkmode"),I("sidebar",".darkmode_switchbutton"),document.querySelector("#sidebar-menus .menus_items")&&document.querySelector("#sidebar-menus .menus_items").addEventListener("click",e=>{e=e.target.closest(".site-page.group");e&&e.classList.toggle("hide")}),GLOBAL_CONFIG.islazyload&&(window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})),void 0!==GLOBAL_CONFIG.copyright&&(()=>{let{limitCount:o,languages:i,copy:e,copyrightEbable:a}=GLOBAL_CONFIG.copyright;document.body.addEventListener("copy",t=>{if(e&&chyt.snackbarShow(i.copySuccess),a){t.preventDefault();var n=window.getSelection(0).toString();let e=n;return n.length>o&&(e=`${n}


${i.author}
${i.link}${window.location.href}
${i.source}
`+i.info),(t.clipboardData?t:window).clipboardData.setData("text",e)}})})(),GLOBAL_CONFIG.navMusic){let e=setInterval(()=>{if(navMusicEl&&navMusicEl.querySelector("#nav-music meting-js").aplayer){clearInterval(e);navMusicEl.querySelector("#nav-music meting-js").aplayer.on("pause",function(){navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="chytfont chyt-icon-play"></i><span>播放音乐</span>',document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#consoleMusic").classList.remove("on"),chyt_musicPlaying=!1,navMusicEl.classList.remove("stretch")}),navMusicEl.querySelector("#nav-music meting-js").aplayer.on("play",function(){navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="chytfont chyt-icon-pause"></i><span>暂停音乐</span>',document.querySelector("#consoleMusic").classList.add("on"),chyt_musicPlaying=!0})}},16)}function y(e){var t=27===e.keyCode,n=e.shiftKey,o=chyt_keyboard,i=chyt_intype,t=(t&&(chyt.hideLoading(),chyt.hideConsole(),rm.hideRightMenu()),GLOBAL_CONFIG.shortcutKey.delay||100);let a=GLOBAL_CONFIG.shortcutKey.shiftDelay||200;o&&n&&!i&&(chyt_keyUpShiftDelayEvent_timeoutId=setTimeout(()=>{switch(e.keyCode){case 16:chyt_keyUpEvent_timeoutId=setTimeout(()=>{document.querySelector("#keyboard-tips").classList.add("show")},a);break;case 65:chyt.switchConsole();break;case 77:chyt.musicToggle();break;case 75:chyt.keyboardToggle();break;case 73:chyt.rightMenuToggle();break;case 82:toRandomPost();break;case 72:pjax.loadUrl("/");break;case 68:l.darkmode();break;case 70:pjax.loadUrl("/fcircle/");break;case 76:pjax.loadUrl("/link/");break;case 80:pjax.loadUrl("/about/")}e.preventDefault()},t))}function h(e){chyt_keyUpEvent_timeoutId&&clearTimeout(chyt_keyUpEvent_timeoutId),chyt_keyUpShiftDelayEvent_timeoutId&&clearTimeout(chyt_keyUpShiftDelayEvent_timeoutId),16===e.keyCode&&document.querySelector("#keyboard-tips").classList.remove("show")}if(GLOBAL_CONFIG.shortcutKey&&document.getElementById("consoleKeyboard")&&(localStorage.setItem("keyboardToggle","true"),document.getElementById("consoleKeyboard").classList.add("on"),chyt_keyboard=!0,chyt_keyboard=!!localStorage.getItem("keyboardToggle")&&localStorage.getItem("keyboardToggle"),window.onfocus=function(){document.getElementById("keyboard-tips").classList.remove("show")},(p=window).removeEventListener("keydown",y),p.removeEventListener("keyup",h),p.addEventListener("keydown",y),p.addEventListener("keyup",h)),GLOBAL_CONFIG.autoDarkmode&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{void 0===saveToLocal.get("theme")&&(e.matches?o("dark"):o("light"))}),GLOBAL_CONFIG.greetingBox){var g=GLOBAL_CONFIG.greetingBox.list,p=GLOBAL_CONFIG.greetingBox.default;let e=document.createElement("div"),n=(e.id="greeting",setTimeout(()=>{e.classList.add("shown")},1e3),document.getElementById("greetingBox"));if(n){n.appendChild(e);var L=(new Date).getHours();let t=p;for(let e=0;e<g.length;e++)if(L>=g[e].startTime&&L<=g[e].endTime){t=g[e].greeting;break}e.innerHTML=t,setTimeout(()=>{e.classList.remove("shown"),setTimeout(()=>{n.remove()},500)},3e3)}}GLOBAL_CONFIG.LA51&&i()});